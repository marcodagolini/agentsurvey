<!DOCTYPE html>
<html lang="en">
  
   <head>
        <meta charset="utf-8">
        <title>TIM Agent Survey</title>
        <script src="https://apis.google.com/js/api.js"></script>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://cdn.auth0.com/js/lock/10.2.1/lock.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    </head>
    <body>
      
      
      
    
      
      
       <form id="foo" name="foo">



<select name="a" form="foo">
  <option value="In Ambito">In Ambito</option>
  <option value="Non in Ambito">Non in Ambito</option>
  <option value="Non Definito">Non Definito</option>

</select>

<br><br>

<select name="b" form="foo">
  <option value="Fatturazione">Fatturazione</option>
  <option value="Problemi tecnici">Problemi tecnici</option>
  <option value="Altro">Altro</option>

</select>

<br><br>

<select name="c" form="foo">
  <option value="Customer base">Customer base</option>
  <option value="Mobile">Mobile</option>
  <option value="Fisso">Fisso</option>

</select>

<br><br>

<textarea rows="4" cols="50" name="d" form="foo">
testo
</textarea>

<br><br>


 <input id="mybtn" type="submit" value="Invia" name="mysub" />


</form>
    
  
        
            <script type="text/javascript">
              
     
              
            $(document).ready(function() {
              
   
           
              
               var Time = setTimeout(function(){  //gestione CRM
               alert("ciao");
                 console.log("ahead!");
                // Variable to hold request
                var request;
                
                // Bind to the submit event of our form
                $("#foo").submit(function(event){
                
                    // Abort any pending request
                    if (request) {
                        request.abort();
                    }
                    // setup some local variables
                    var $form = $(this);
                
                    // Let's select and cache all the fields
                    var $inputs = $form.find("d");
                
                    // Serialize the data in the form
                    var serializedData = $form.serialize();
                
                    
                    // Let's disable the inputs for the duration of the Ajax request.
                    // Note: we disable elements AFTER the form data has been serialized.
                    // Disabled form elements will not be serialized.
                    $inputs.prop("disabled", true);
                
                    // Fire off the request to /form.php
                    request = $.ajax({
                        url: "https://script.google.com/macros/s/AKfycbwDVwoDJMpNgb-HyrTPmwLMa8Me4Rqe6bu-VMfpwqRT0UoyoZfm/exec",
                        type: "post",
                        data: serializedData
                    });
                
                    // Callback handler that will be called on success
                    request.done(function (response, textStatus, jqXHR){
                        // Log a message to the console
                        console.log("Hooray, it worked!");
                    });
                
                  
                    // Callback handler that will be called on failure
                    request.fail(function (jqXHR, textStatus, errorThrown){
                        // Log the error to the console
                        console.error(
                            "The following error occurred: "+
                            textStatus, errorThrown
                        );
                    });
                
                    // Callback handler that will be called regardless
                    // if the request failed or succeeded
                    request.always(function () {
                        // Reenable the <inputs></inputs>
                        $inputs.prop("disabled", false);
                    });
                
                    // Prevent default posting of form
                    event.preventDefault();
                });    
                    
               }, 10000);
              
           });
  
        
      </script>
     
      
     
      
   
      



  
</body>
</html>
